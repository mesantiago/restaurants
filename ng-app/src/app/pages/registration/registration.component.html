<div class="container">
  <div class="row mt-2">
    <div class="col-12 col-md-8 offset-md-2">
      <form #registrationForm="ngForm" (ngSubmit)="onSubmit(registrationForm, successModal)" novalidate autocomplete="off">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title"> Registration </h5>
            <alert type="danger" *ngIf="error">
              {{ error }}
            </alert>
            <div class="row">
              <div class="col-12">
                <div class="form-group">
                  <label for="email"> Email </label>
                  <input name="email" type="email" class="form-control" id="email" #email="ngModel" placeholder="Enter email" required="required"
                    [ngClass]="{ 'is-valid': (email.dirty || email.touched || registrationForm.submitted) && email.valid, 'is-invalid': (email.dirty || email.touched || registrationForm.submitted) && email.invalid }"
                    [(ngModel)]="registration.email" email>
                  <div class="invalid-feedback" *ngIf="email.errors">
                    <p *ngIf="email.errors.required">Email is required!</p>
                    <p *ngIf="email.errors.email">Email is invalid!</p>
                  </div>
                </div>
                <div class="form-group">
                  <label for="password"> Password </label>
                  <input name="password" type="password" class="form-control" id="password" #password="ngModel" placeholder="Enter password" required="required"
                    [ngClass]="{ 'is-valid': (password.dirty || password.touched || registrationForm.submitted) && password.valid, 'is-invalid': (password.dirty || password.touched || registrationForm.submitted) && password.invalid }"
                    [(ngModel)]="registration.password">
                  <div class="invalid-feedback" *ngIf="password.errors">
                    <p *ngIf="password.errors.required">Password is required!</p>
                  </div>
                </div>
                <div class="form-group">
                  <label for="retypePassword"> Retype Password </label>
                  <input name="retypePassword" type="password" class="form-control" id="retypePassword" #retypePassword="ngModel" placeholder="Retype Password" required="required"  pattern="{{ password.value }}"
                    [ngClass]="{ 'is-valid': (retypePassword.dirty || retypePassword.touched || registrationForm.submitted) && retypePassword.valid, 'is-invalid': (retypePassword.dirty || retypePassword.touched || registrationForm.submitted) && retypePassword.invalid }"
                    [(ngModel)]="registration.retypePassword">
                  <div class="invalid-feedback" *ngIf="retypePassword.errors">
                    <p *ngIf="retypePassword.errors.required"> Please retype password!</p>
                    <p *ngIf="retypePassword.errors.pattern"> Passwords did not match!</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col-12 col-md-6 col-lg-4">
                <button type="submit" class="btn btn-primary form-control" [disabled]="registrationForm.invalid"> Submit </button>
              </div>
              <div class="col-12 col-md-6 col-lg-4">
                <button routerLink="/" type="button" class="btn btn-secondary form-control"> Cancel </button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<ng-template #successModal>
  <div class="modal-body text-center">
    <p>Successfully Registered!</p>
    <button type="button" class="btn btn-primary" (click)="ok()" >Ok</button>
  </div>
</ng-template>
